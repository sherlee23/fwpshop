<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FengWei Pai é”‹å‘³æ´¾ç¾é£Ÿå›¢è´­ç³»ç»Ÿ</title>
    <style>
        /* åŸºç¡€é‡ç½® */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Microsoft YaHei', 'å¾®è½¯é›…é»‘', Arial, sans-serif; background: #f8fafc; color: #1a202c; }
        
        /* ä¸»é¢˜è‰²å½© - çº¢è‰²ä¸»é¢˜ */
        :root {
            --primary-color: #dc2626;
            --primary-dark: #b91c1c;
            --primary-light: #ef4444;
            --secondary-color: #64748b;
            --accent-color: #f59e0b;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --info-color: #3b82f6;
        }
        
        /* æŒ‰é’®æ ·å¼ */
        .btn { padding: 0.5rem 1rem; border-radius: 0.375rem; border: none; cursor: pointer; font-weight: 600; transition: all 0.2s; }
        .btn-primary { background: var(--primary-color); color: white; }
        .btn-primary:hover { background: var(--primary-dark); }
        .btn-secondary { background: #e5e7eb; color: #374151; }
        .btn-secondary:hover { background: #d1d5db; }
        
        /* å®¹å™¨ */
        .container { max-width: 1200px; margin: 0 auto; padding: 0 1rem; }
        
        /* å¤´éƒ¨ */
        .header { background: var(--primary-color); color: white; padding: 1rem 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.5rem; font-weight: bold; }
        .nav-buttons { display: flex; gap: 0.5rem; }
        
        /* åˆ†ç±»å¯¼èˆª */
        .category-nav { background: white; padding: 1rem 0; border-bottom: 1px solid #e5e7eb; position: sticky; top: 0; z-index: 40; }
        .category-list { display: flex; gap: 0.5rem; overflow-x: auto; padding: 0 1rem; }
        .category-item { 
            padding: 0.5rem 1rem; 
            border-radius: 1.5rem; 
            background: #f3f4f6; 
            color: #374151; 
            font-weight: 600; 
            white-space: nowrap; 
            cursor: pointer; 
            transition: all 0.2s;
        }
        .category-item.active { background: var(--primary-color); color: white; }
        .category-item:hover { background: var(--primary-light); color: white; }
        
        /* äº§å“ç½‘æ ¼ */
        .products-section { padding: 2rem 0; }
        .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1.5rem; }
        .product-card { 
            background: white; 
            border-radius: 0.5rem; 
            box-shadow: 0 1px 3px rgba(0,0,0,0.1); 
            overflow: hidden; 
            transition: transform 0.2s;
        }
        .product-card:hover { transform: translateY(-2px); box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .product-image { width: 100%; height: 200px; object-fit: cover; }
        .product-info { padding: 1rem; }
        .product-name { font-weight: bold; margin-bottom: 0.5rem; }
        .product-price { color: var(--primary-color); font-weight: bold; font-size: 1.1rem; }
        .product-actions { padding: 0 1rem 1rem; }
        
        /* è´­ç‰©è½¦ä¾§è¾¹æ  */
        .cart-sidebar { 
            position: fixed; 
            top: 0; 
            right: 0; 
            height: 100vh; 
            width: 400px; 
            background: white; 
            box-shadow: -2px 0 8px rgba(0,0,0,0.1); 
            transform: translateX(100%); 
            transition: transform 0.3s; 
            z-index: 50;
        }
        .cart-sidebar.open { transform: translateX(0); }
        .cart-header { padding: 1rem; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center; }
        .cart-content { padding: 1rem; flex: 1; overflow-y: auto; }
        .cart-footer { padding: 1rem; border-top: 1px solid #e5e7eb; }
        
        /* æ¨¡æ€æ¡† */
        .modal-overlay { 
            position: fixed; 
            top: 0; 
            left: 0; 
            right: 0; 
            bottom: 0; 
            background: rgba(0,0,0,0.5); 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            z-index: 50;
        }
        .modal-content { 
            background: white; 
            border-radius: 0.5rem; 
            max-width: 500px; 
            width: 90%; 
            max-height: 90vh; 
            overflow-y: auto;
        }
        .modal-header { padding: 1rem; border-bottom: 1px solid #e5e7eb; font-weight: bold; }
        .modal-body { padding: 1rem; }
        .modal-footer { padding: 1rem; border-top: 1px solid #e5e7eb; display: flex; gap: 0.5rem; justify-content: flex-end; }
        
        /* è¡¨å• */
        .form-group { margin-bottom: 1rem; }
        .form-label { display: block; margin-bottom: 0.25rem; font-weight: 600; }
        .form-input { 
            width: 100%; 
            padding: 0.5rem; 
            border: 1px solid #d1d5db; 
            border-radius: 0.375rem; 
            font-size: 1rem;
        }
        .form-input:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1); }
        
        /* åå°ç®¡ç† */
        .admin-layout { display: flex; min-height: 100vh; }
        .admin-sidebar { width: 250px; background: #1f2937; color: white; }
        .admin-content { flex: 1; background: #f9fafb; }
        .admin-nav { padding: 1rem; }
        .admin-nav-item { 
            display: block; 
            padding: 0.75rem 1rem; 
            color: #d1d5db; 
            text-decoration: none; 
            border-radius: 0.375rem; 
            margin-bottom: 0.25rem;
        }
        .admin-nav-item:hover { background: #374151; color: white; }
        .admin-nav-item.active { background: var(--primary-color); color: white; }
        
        /* å“åº”å¼ */
        @media (max-width: 768px) {
            .cart-sidebar { width: 100%; }
            .admin-layout { flex-direction: column; }
            .admin-sidebar { width: 100%; }
            .products-grid { grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); }
        }
        
        /* å·¥å…·ç±» */
        .hidden { display: none !important; }
        .text-center { text-align: center; }
        .text-red { color: var(--primary-color); }
        .bg-red { background: var(--primary-color); }
        .font-bold { font-weight: bold; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .gap-2 { gap: 0.5rem; }
        .p-4 { padding: 1rem; }
        .mt-4 { margin-top: 1rem; }
        .mb-4 { margin-bottom: 1rem; }
    </style>
</head>
<body>
    <div id="app">
        <!-- å¤´éƒ¨ -->
        <header class="header">
            <div class="container">
                <div class="header-content">
                    <div class="logo">ğŸœ é”‹å‘³æ´¾ç¾é£Ÿ</div>
                    <div class="nav-buttons">
                        <button class="btn btn-secondary" onclick="toggleCart()">ğŸ›’ è´­ç‰©è½¦ (<span id="cart-count">0</span>)</button>
                        <button class="btn btn-secondary" onclick="showAdmin()">ğŸ”§ åå°</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- åˆ†ç±»å¯¼èˆª -->
        <nav class="category-nav">
            <div class="container">
                <div class="category-list" id="category-list">
                    <div class="category-item active" data-category="å…¨éƒ¨å•†å“">ğŸ½ï¸ å…¨éƒ¨å•†å“</div>
                    <div class="category-item" data-category="çƒ¤è‚ ç³»åˆ—">ğŸŒ­ çƒ¤è‚ ç³»åˆ—</div>
                    <div class="category-item" data-category="çƒ§å–ç³»åˆ—">ğŸ¥Ÿ çƒ§å–ç³»åˆ—</div>
                    <div class="category-item" data-category="æ°´é¥ºç³»åˆ—">ğŸ¥Ÿ æ°´é¥ºç³»åˆ—</div>
                    <div class="category-item" data-category="é±¼ä¸¸ç³»åˆ—">ğŸŸ é±¼ä¸¸ç³»åˆ—</div>
                    <div class="category-item" data-category="é¢é£Ÿç³»åˆ—">ğŸœ é¢é£Ÿç³»åˆ—</div>
                    <div class="category-item" data-category="é¥­ç±»ç³»åˆ—">ğŸš é¥­ç±»ç³»åˆ—</div>
                    <div class="category-item" data-category="æ±¤å“ç³»åˆ—">ğŸ² æ±¤å“ç³»åˆ—</div>
                    <div class="category-item" data-category="é¥®æ–™ç³»åˆ—">ğŸ¥¤ é¥®æ–™ç³»åˆ—</div>
                </div>
            </div>
        </nav>

        <!-- äº§å“åŒºåŸŸ -->
        <section class="products-section">
            <div class="container">
                <div class="products-grid" id="products-grid">
                    <!-- äº§å“å°†é€šè¿‡ JavaScript åŠ¨æ€åŠ è½½ -->
                </div>
            </div>
        </section>

        <!-- è´­ç‰©è½¦ä¾§è¾¹æ  -->
        <div class="cart-sidebar" id="cart-sidebar">
            <div class="cart-header">
                <h3>è´­ç‰©è½¦</h3>
                <button class="btn btn-secondary" onclick="toggleCart()">âœ•</button>
            </div>
            <div class="cart-content" id="cart-content">
                <p class="text-center">è´­ç‰©è½¦ä¸ºç©º</p>
            </div>
            <div class="cart-footer">
                <div class="mb-4">
                    <strong>æ€»è®¡: RM <span id="cart-total">0.00</span></strong>
                </div>
                <button class="btn btn-primary" style="width: 100%;" onclick="checkout()">ç»“è´¦</button>
            </div>
        </div>

        <!-- ç»“è´¦æ¨¡æ€æ¡† -->
        <div class="modal-overlay hidden" id="checkout-modal">
            <div class="modal-content">
                <div class="modal-header">ç»“è´¦</div>
                <div class="modal-body">
                    <form id="checkout-form">
                        <div class="form-group">
                            <label class="form-label">é…é€æ–¹å¼</label>
                            <label><input type="radio" name="delivery" value="pickup" checked> è‡ªå–</label>
                            <label><input type="radio" name="delivery" value="delivery"> é…é€</label>
                        </div>
                        
                        <div id="pickup-address" class="form-group">
                            <label class="form-label">å–è´§åœ°å€</label>
                            <p>667, Jalan 24, Taman Perindustrian Ehsan Jaya, Kepong, 52100, Kuala Lumpur.</p>
                        </div>
                        
                        <div id="delivery-form" class="form-group hidden">
                            <label class="form-label">é…é€åœ°å€</label>
                            <input type="text" class="form-input" name="address" placeholder="è¯·è¾“å…¥å®Œæ•´åœ°å€">
                            <label class="form-label">å¤‡æ³¨</label>
                            <textarea class="form-input" name="remarks" placeholder="ç»™Lalamoveçš„å¤‡æ³¨"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ä»˜æ¬¾æ–¹å¼</label>
                            <label><input type="radio" name="payment" value="maybank" checked> Maybank QR</label>
                            <label><input type="radio" name="payment" value="tng"> TNG eWallet</label>
                        </div>
                        
                        <div id="payment-info">
                            <div id="maybank-info">
                                <p><strong>Maybankè½¬è´¦ä¿¡æ¯:</strong></p>
                                <p>æˆ·å: Choong Sher Lee</p>
                                <p>è´¦å·: 114209540438</p>
                                <p>é“¶è¡Œ: Maybank</p>
                            </div>
                            <div id="tng-info" class="hidden">
                                <p><strong>TNG eWallet</strong></p>
                                <p>è¯·æ‰«æäºŒç»´ç ä»˜æ¬¾</p>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">è”ç³»æ–¹å¼</label>
                            <input type="text" class="form-input" name="phone" placeholder="æ‰‹æœºå·ç " required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">å§“å</label>
                            <input type="text" class="form-input" name="name" placeholder="å§“å" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeCheckout()">å–æ¶ˆ</button>
                    <button class="btn btn-primary" onclick="submitOrder()">æäº¤è®¢å•</button>
                </div>
            </div>
        </div>

        <!-- åå°ç®¡ç†æ¨¡æ€æ¡† -->
        <div class="modal-overlay hidden" id="admin-modal">
            <div class="modal-content" style="max-width: 90%; width: 1000px;">
                <div class="modal-header">
                    <span>åå°ç®¡ç†</span>
                    <button class="btn btn-secondary" onclick="closeAdmin()" style="float: right;">âœ•</button>
                </div>
                <div class="modal-body" style="padding: 0;">
                    <div class="admin-layout">
                        <div class="admin-sidebar">
                            <div class="admin-nav">
                                <a href="#" class="admin-nav-item active" onclick="showAdminTab('dashboard')">ğŸ“Š ä»ªè¡¨ç›˜</a>
                                <a href="#" class="admin-nav-item" onclick="showAdminTab('products')">ğŸ“¦ äº§å“ç®¡ç†</a>
                                <a href="#" class="admin-nav-item" onclick="showAdminTab('inventory')">ğŸ“‹ åº“å­˜ç®¡ç†</a>
                                <a href="#" class="admin-nav-item" onclick="showAdminTab('orders')">ğŸ“‹ è®¢å•ç®¡ç†</a>
                                <a href="#" class="admin-nav-item" onclick="showAdminTab('members')">ğŸ‘¥ ä¼šå‘˜ç®¡ç†</a>
                                <a href="#" class="admin-nav-item" onclick="showAdminTab('analytics')">ğŸ“ˆ æ•°æ®åˆ†æ</a>
                                <a href="#" class="admin-nav-item" onclick="showAdminTab('scanner')">ğŸ“± æ‰«ç åŠŸèƒ½</a>
                                <a href="#" class="admin-nav-item" onclick="showAdminTab('camera')">ğŸ“· æ‹ç…§åŠŸèƒ½</a>
                            </div>
                        </div>
                        <div class="admin-content">
                            <div id="admin-content">
                                <!-- åŠ¨æ€å†…å®¹ -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let cart = [];
        let products = [];
        let currentCategory = 'å…¨éƒ¨å•†å“';

        // ç¤ºä¾‹äº§å“æ•°æ®
        const sampleProducts = [
            { id: 1, name: 'ç»å…¸å°å¼çƒ¤è‚ ', price: 12.50, category: 'çƒ¤è‚ ç³»åˆ—', image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjgwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2RjMjYyNiIvPjx0ZXh0IHg9IjE0MCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjAiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+5Y+w5byP54Kk6IKgPC90ZXh0Pjwvc3ZnPg==', stock: 20 },
            { id: 2, name: 'é»‘çŒªä¸‰ä¸çº¸çš®çƒ§å–', price: 8.80, category: 'çƒ§å–ç³»åˆ—', image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjgwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2RjMjYyNiIvPjx0ZXh0IHg9IjE0MCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjAiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+54Gn5Y2WPC90ZXh0Pjwvc3ZnPg==', stock: 15 },
            { id: 3, name: 'æ‰‹å·¥éŸ­èœæ°´é¥º', price: 6.50, category: 'æ°´é¥ºç³»åˆ—', image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjgwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2RjMjYyNiIvPjx0ZXh0IHg9IjE0MCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjAiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+5LiA6aWDPC90ZXh0Pjwvc3ZnPg==', stock: 30 },
            { id: 4, name: 'Qå¼¹é±¼ä¸¸', price: 4.20, category: 'é±¼ä¸¸ç³»åˆ—', image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjgwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2RjMjYyNiIvPjx0ZXh0IHg9IjE0MCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjAiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+6bG85LiLPC90ZXh0Pjwvc3ZnPg==', stock: 25 },
            { id: 5, name: 'å…°å·æ‹‰é¢', price: 15.80, category: 'é¢é£Ÿç³»åˆ—', image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjgwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2RjMjYyNiIvPjx0ZXh0IHg9IjE0MCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjAiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+5ouJ6Z2iPC90ZXh0Pjwvc3ZnPg==', stock: 40 },
            { id: 6, name: 'æ‹›ç‰Œé¸¡é¥­', price: 18.80, category: 'é¥­ç±»ç³»åˆ—', image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjgwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2RjMjYyNiIvPjx0ZXh0IHg9IjE0MCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjAiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+6bih6aWZPC90ZXh0Pjwvc3ZnPg==', stock: 10 },
            { id: 7, name: 'å†¬ç“œæ’éª¨æ±¤', price: 12.00, category: 'æ±¤å“ç³»åˆ—', image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjgwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2RjMjYyNiIvPjx0ZXh0IHg9IjE0MCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjAiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+5rGk5ZYNPC90ZXh0Pjwvc3ZnPg==', stock: 25 },
            { id: 8, name: 'ç‰¹è°ƒå¥¶èŒ¶', price: 5.80, category: 'é¥®æ–™ç³»åˆ—', image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjgwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2RjMjYyNiIvPjx0ZXh0IHg9IjE0MCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjAiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+5aWK6IyaPC90ZXh0Pjwvc3ZnPg==', stock: 50 }
        ];

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            products = sampleProducts;
            renderProducts();
            setupCategoryNavigation();
            setupDeliveryToggle();
            setupPaymentToggle();
        });

        // æ¸²æŸ“äº§å“
        function renderProducts() {
            const grid = document.getElementById('products-grid');
            const filteredProducts = currentCategory === 'å…¨éƒ¨å•†å“' 
                ? products 
                : products.filter(p => p.category === currentCategory);

            grid.innerHTML = filteredProducts.map(product => `
                <div class="product-card">
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    <div class="product-info">
                        <div class="product-name">${product.name}</div>
                        <div class="product-price">RM ${product.price.toFixed(2)}</div>
                        <div style="font-size: 0.9rem; color: #6b7280;">åº“å­˜: ${product.stock}</div>
                    </div>
                    <div class="product-actions">
                        <button class="btn btn-primary" style="width: 100%;" onclick="addToCart(${product.id})">åŠ å…¥è´­ç‰©è½¦</button>
                    </div>
                </div>
            `).join('');
        }

        // åˆ†ç±»å¯¼èˆª
        function setupCategoryNavigation() {
            const categoryItems = document.querySelectorAll('.category-item');
            categoryItems.forEach(item => {
                item.addEventListener('click', function() {
                    categoryItems.forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    currentCategory = this.dataset.category;
                    renderProducts();
                });
            });
        }

        // æ·»åŠ åˆ°è´­ç‰©è½¦
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product || product.stock <= 0) {
                alert('å•†å“åº“å­˜ä¸è¶³');
                return;
            }

            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                if (existingItem.quantity < product.stock) {
                    existingItem.quantity++;
                } else {
                    alert('å·²è¾¾åˆ°åº“å­˜ä¸Šé™');
                    return;
                }
            } else {
                cart.push({ ...product, quantity: 1 });
            }

            updateCartDisplay();
            updateCartCount();
        }

        // æ›´æ–°è´­ç‰©è½¦æ˜¾ç¤º
        function updateCartDisplay() {
            const cartContent = document.getElementById('cart-content');
            if (cart.length === 0) {
                cartContent.innerHTML = '<p class="text-center">è´­ç‰©è½¦ä¸ºç©º</p>';
                document.getElementById('cart-total').textContent = '0.00';
                return;
            }

            cartContent.innerHTML = cart.map(item => `
                <div class="flex items-center justify-between mb-4" style="border-bottom: 1px solid #e5e7eb; padding-bottom: 1rem;">
                    <div>
                        <div class="font-bold">${item.name}</div>
                        <div class="text-red">RM ${item.price.toFixed(2)}</div>
                    </div>
                    <div class="flex items-center gap-2">
                        <button class="btn btn-secondary" onclick="updateQuantity(${item.id}, -1)">-</button>
                        <span>${item.quantity}</span>
                        <button class="btn btn-secondary" onclick="updateQuantity(${item.id}, 1)">+</button>
                        <button class="btn btn-secondary" onclick="removeFromCart(${item.id})">ğŸ—‘ï¸</button>
                    </div>
                </div>
            `).join('');

            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('cart-total').textContent = total.toFixed(2);
        }

        // æ›´æ–°è´­ç‰©è½¦æ•°é‡
        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cart-count').textContent = count;
        }

        // æ›´æ–°å•†å“æ•°é‡
        function updateQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            const product = products.find(p => p.id === productId);
            
            if (item) {
                const newQuantity = item.quantity + change;
                if (newQuantity <= 0) {
                    removeFromCart(productId);
                } else if (newQuantity <= product.stock) {
                    item.quantity = newQuantity;
                    updateCartDisplay();
                    updateCartCount();
                } else {
                    alert('è¶…å‡ºåº“å­˜é™åˆ¶');
                }
            }
        }

        // ä»è´­ç‰©è½¦ç§»é™¤
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartDisplay();
            updateCartCount();
        }

        // åˆ‡æ¢è´­ç‰©è½¦
        function toggleCart() {
            const sidebar = document.getElementById('cart-sidebar');
            sidebar.classList.toggle('open');
        }

        // ç»“è´¦
        function checkout() {
            if (cart.length === 0) {
                alert('è´­ç‰©è½¦ä¸ºç©º');
                return;
            }
            document.getElementById('checkout-modal').classList.remove('hidden');
        }

        // å…³é—­ç»“è´¦
        function closeCheckout() {
            document.getElementById('checkout-modal').classList.add('hidden');
        }

        // é…é€æ–¹å¼åˆ‡æ¢
        function setupDeliveryToggle() {
            const deliveryRadios = document.querySelectorAll('input[name="delivery"]');
            deliveryRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    const pickupDiv = document.getElementById('pickup-address');
                    const deliveryDiv = document.getElementById('delivery-form');
                    
                    if (this.value === 'pickup') {
                        pickupDiv.classList.remove('hidden');
                        deliveryDiv.classList.add('hidden');
                    } else {
                        pickupDiv.classList.add('hidden');
                        deliveryDiv.classList.remove('hidden');
                    }
                });
            });
        }

        // ä»˜æ¬¾æ–¹å¼åˆ‡æ¢
        function setupPaymentToggle() {
            const paymentRadios = document.querySelectorAll('input[name="payment"]');
            paymentRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    const maybankInfo = document.getElementById('maybank-info');
                    const tngInfo = document.getElementById('tng-info');
                    
                    if (this.value === 'maybank') {
                        maybankInfo.classList.remove('hidden');
                        tngInfo.classList.add('hidden');
                    } else {
                        maybankInfo.classList.add('hidden');
                        tngInfo.classList.remove('hidden');
                    }
                });
            });
        }

        // æäº¤è®¢å•
        function submitOrder() {
            const form = document.getElementById('checkout-form');
            const formData = new FormData(form);
            
            const orderData = {
                items: cart,
                delivery: formData.get('delivery'),
                payment: formData.get('payment'),
                phone: formData.get('phone'),
                name: formData.get('name'),
                total: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0)
            };

            if (orderData.delivery === 'delivery') {
                orderData.address = formData.get('address');
                orderData.remarks = formData.get('remarks');
            }

            // éªŒè¯å¿…å¡«å­—æ®µ
            if (!orderData.phone || !orderData.name) {
                alert('è¯·å¡«å†™è”ç³»æ–¹å¼å’Œå§“å');
                return;
            }

            if (orderData.delivery === 'delivery' && !orderData.address) {
                alert('è¯·å¡«å†™é…é€åœ°å€');
                return;
            }

            // ç”Ÿæˆè®¢å•å·
            const orderNumber = 'FWP' + Date.now().toString().slice(-8);
            
            // ç”ŸæˆWhatsAppæ¶ˆæ¯
            const message = `æ–°è®¢å• ${orderNumber}\n\n` +
                `å®¢æˆ·: ${orderData.name}\n` +
                `ç”µè¯: ${orderData.phone}\n` +
                `é…é€: ${orderData.delivery === 'pickup' ? 'è‡ªå–' : 'é…é€'}\n` +
                (orderData.address ? `åœ°å€: ${orderData.address}\n` : '') +
                (orderData.remarks ? `å¤‡æ³¨: ${orderData.remarks}\n` : '') +
                `ä»˜æ¬¾: ${orderData.payment === 'maybank' ? 'Maybank' : 'TNG eWallet'}\n\n` +
                `è®¢å•å†…å®¹:\n` +
                cart.map(item => `${item.name} x${item.quantity} = RM${(item.price * item.quantity).toFixed(2)}`).join('\n') +
                `\n\næ€»è®¡: RM${orderData.total.toFixed(2)}`;

            const whatsappUrl = `https://wa.me/60162327792?text=${encodeURIComponent(message)}`;
            
            // å‡å°‘åº“å­˜
            cart.forEach(item => {
                const product = products.find(p => p.id === item.id);
                if (product) {
                    product.stock -= item.quantity;
                }
            });

            alert(`è®¢å•æäº¤æˆåŠŸï¼è®¢å•å·: ${orderNumber}\n\nå³å°†è·³è½¬åˆ°WhatsAppç¡®è®¤è®¢å•...`);
            
            // æ¸…ç©ºè´­ç‰©è½¦
            cart = [];
            updateCartDisplay();
            updateCartCount();
            closeCheckout();
            renderProducts();
            
            // è·³è½¬åˆ°WhatsApp
            window.open(whatsappUrl, '_blank');
        }

        // æ˜¾ç¤ºåå°ç®¡ç†
        function showAdmin() {
            const password = prompt('è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç :');
            if (password === 'fengweipaiadmin') {
                document.getElementById('admin-modal').classList.remove('hidden');
                showAdminTab('dashboard');
            } else if (password !== null) {
                alert('å¯†ç é”™è¯¯');
            }
        }

        // å…³é—­åå°ç®¡ç†
        function closeAdmin() {
            document.getElementById('admin-modal').classList.add('hidden');
        }

        // æ˜¾ç¤ºåå°æ ‡ç­¾é¡µ
        function showAdminTab(tab) {
            // æ›´æ–°å¯¼èˆªçŠ¶æ€
            document.querySelectorAll('.admin-nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');

            const content = document.getElementById('admin-content');
            
            switch(tab) {
                case 'dashboard':
                    content.innerHTML = `
                        <div class="p-4">
                            <h2 class="font-bold mb-4">ä»ªè¡¨ç›˜æ€»è§ˆ</h2>
                            
                            <!-- å…³é”®æŒ‡æ ‡å¡ç‰‡ -->
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                                <div style="background: linear-gradient(135deg, #dc2626, #b91c1c); color: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                                    <h3 style="margin-bottom: 0.5rem;">ğŸ“¦ æ€»äº§å“æ•°</h3>
                                    <p style="font-size: 2.5rem; font-weight: bold;">${products.length}</p>
                                    <p style="font-size: 0.9rem; opacity: 0.9;">ä¸ªå•†å“å“ç±»</p>
                                </div>
                                <div style="background: linear-gradient(135deg, #16a34a, #15803d); color: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                                    <h3 style="margin-bottom: 0.5rem;">ğŸ’° åº“å­˜æ€»å€¼</h3>
                                    <p style="font-size: 2.5rem; font-weight: bold;">RM${products.reduce((sum, p) => sum + (p.price * p.stock), 0).toFixed(0)}</p>
                                    <p style="font-size: 0.9rem; opacity: 0.9;">æ€»åº“å­˜ä»·å€¼</p>
                                </div>
                                <div style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                                    <h3 style="margin-bottom: 0.5rem;">âš ï¸ ä½åº“å­˜è­¦æŠ¥</h3>
                                    <p style="font-size: 2.5rem; font-weight: bold;">${products.filter(p => p.stock < 10).length}</p>
                                    <p style="font-size: 0.9rem; opacity: 0.9;">éœ€è¦è¡¥è´§</p>
                                </div>
                                <div style="background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                                    <h3 style="margin-bottom: 0.5rem;">ğŸ“ˆ é¢„å”®ç»Ÿè®¡</h3>
                                    <p style="font-size: 2.5rem; font-weight: bold;">85%</p>
                                    <p style="font-size: 0.9rem; opacity: 0.9;">æˆå›¢è¿›åº¦ (170/200ç›’)</p>
                                </div>
                            </div>

                            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem;">
                                <!-- åº“å­˜çŠ¶æ€è¯¦æƒ… -->
                                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                                    <h3 style="margin-bottom: 1rem;">ğŸ“‹ åº“å­˜ç®¡ç†çŠ¶æ€</h3>
                                    <div style="overflow-x: auto;">
                                        <table style="width: 100%; border-collapse: collapse;">
                                            <thead>
                                                <tr style="background: #f9fafb;">
                                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 1px solid #e5e7eb;">å•†å“åç§°</th>
                                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 1px solid #e5e7eb;">åˆ†ç±»</th>
                                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 1px solid #e5e7eb;">åº“å­˜</th>
                                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 1px solid #e5e7eb;">çŠ¶æ€</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                ${products.map(p => `
                                                    <tr>
                                                        <td style="padding: 0.75rem; border-bottom: 1px solid #e5e7eb;">${p.name}</td>
                                                        <td style="padding: 0.75rem; border-bottom: 1px solid #e5e7eb;">${p.category}</td>
                                                        <td style="padding: 0.75rem; border-bottom: 1px solid #e5e7eb;">${p.stock}</td>
                                                        <td style="padding: 0.75rem; border-bottom: 1px solid #e5e7eb;">
                                                            <span style="padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.8rem; color: white; background: ${p.stock < 10 ? '#ef4444' : p.stock < 20 ? '#f59e0b' : '#10b981'};">
                                                                ${p.stock < 10 ? 'ä½åº“å­˜' : p.stock < 20 ? 'ä¸­ç­‰' : 'å……è¶³'}
                                                            </span>
                                                        </td>
                                                    </tr>
                                                `).join('')}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- åˆ†ç±»ç»Ÿè®¡ -->
                                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                                    <h3 style="margin-bottom: 1rem;">ğŸ“Š åˆ†ç±»åˆ†å¸ƒ</h3>
                                    ${Array.from(new Set(products.map(p => p.category))).map(category => {
                                        const count = products.filter(p => p.category === category).length;
                                        const totalStock = products.filter(p => p.category === category).reduce((sum, p) => sum + p.stock, 0);
                                        const percentage = Math.round((count / products.length) * 100);
                                        return `
                                            <div style="margin-bottom: 1rem; padding: 1rem; background: #f9fafb; border-radius: 0.375rem;">
                                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                                    <span style="font-weight: 600;">${category}</span>
                                                    <span style="color: #6b7280;">${count} å“</span>
                                                </div>
                                                <div style="display: flex; justify-content: space-between; font-size: 0.9rem; color: #6b7280;">
                                                    <span>æ€»åº“å­˜: ${totalStock}</span>
                                                    <span>${percentage}%</span>
                                                </div>
                                                <div style="width: 100%; background: #e5e7eb; border-radius: 0.25rem; height: 0.5rem; margin-top: 0.5rem;">
                                                    <div style="background: var(--primary-color); height: 100%; border-radius: 0.25rem; width: ${percentage}%;"></div>
                                                </div>
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                            </div>

                            <!-- é¢„å”®æˆå›¢è¿›åº¦ -->
                            <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-top: 2rem;">
                                <h3 style="margin-bottom: 1rem;">ğŸ¯ é¢„å”®æˆå›¢ç»Ÿè®¡ (200ç›’æˆå›¢åˆ¶)</h3>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                                    <div style="text-align: center;">
                                        <div style="position: relative; width: 120px; height: 120px; margin: 0 auto;">
                                            <svg width="120" height="120" viewBox="0 0 120 120">
                                                <circle cx="60" cy="60" r="50" fill="none" stroke="#e5e7eb" stroke-width="10"/>
                                                <circle cx="60" cy="60" r="50" fill="none" stroke="#dc2626" stroke-width="10" 
                                                    stroke-dasharray="${2 * Math.PI * 50 * 0.85} ${2 * Math.PI * 50}" 
                                                    stroke-dashoffset="${2 * Math.PI * 50 * 0.25}" transform="rotate(-90 60 60)"/>
                                            </svg>
                                            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 1.5rem; font-weight: bold;">85%</div>
                                        </div>
                                        <p style="margin-top: 0.5rem; font-weight: 600;">é¢„å”®è¿›åº¦</p>
                                        <p style="color: #6b7280; font-size: 0.9rem;">170 / 200ç›’</p>
                                    </div>
                                    <div style="padding: 1rem;">
                                        <div style="margin-bottom: 0.5rem;">
                                            <span style="font-weight: 600;">å·²é¢„å”®:</span>
                                            <span style="color: var(--primary-color); font-weight: bold;">170ç›’</span>
                                        </div>
                                        <div style="margin-bottom: 0.5rem;">
                                            <span style="font-weight: 600;">å‰©ä½™åé¢:</span>
                                            <span style="color: #f59e0b; font-weight: bold;">30ç›’</span>
                                        </div>
                                        <div style="margin-bottom: 0.5rem;">
                                            <span style="font-weight: 600;">é¢„è®¡æˆå›¢æ—¶é—´:</span>
                                            <span style="color: #16a34a; font-weight: bold;">2å¤©å†…</span>
                                        </div>
                                        <div style="margin-top: 1rem; padding: 0.75rem; background: #fef3c7; border-radius: 0.375rem; border-left: 4px solid #f59e0b;">
                                            <p style="color: #92400e; font-size: 0.9rem;">ğŸ“¢ è·ç¦»æˆå›¢è¿˜å·®30ç›’ï¼Œé¢„è®¡2å¤©å†…å®Œæˆï¼</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'products':
                    content.innerHTML = `
                        <div class="p-4">
                            <h2 class="font-bold mb-4">äº§å“ç®¡ç†</h2>
                            <button class="btn btn-primary mb-4" onclick="addProduct()">æ·»åŠ æ–°äº§å“</button>
                            <div style="background: white; border-radius: 0.5rem; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                                <table style="width: 100%; border-collapse: collapse;">
                                    <thead style="background: #f9fafb;">
                                        <tr>
                                            <th style="padding: 1rem; text-align: left; border-bottom: 1px solid #e5e7eb;">äº§å“åç§°</th>
                                            <th style="padding: 1rem; text-align: left; border-bottom: 1px solid #e5e7eb;">åˆ†ç±»</th>
                                            <th style="padding: 1rem; text-align: left; border-bottom: 1px solid #e5e7eb;">ä»·æ ¼</th>
                                            <th style="padding: 1rem; text-align: left; border-bottom: 1px solid #e5e7eb;">åº“å­˜</th>
                                            <th style="padding: 1rem; text-align: left; border-bottom: 1px solid #e5e7eb;">æ“ä½œ</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${products.map(p => `
                                            <tr>
                                                <td style="padding: 1rem; border-bottom: 1px solid #e5e7eb;">${p.name}</td>
                                                <td style="padding: 1rem; border-bottom: 1px solid #e5e7eb;">${p.category}</td>
                                                <td style="padding: 1rem; border-bottom: 1px solid #e5e7eb;">RM${p.price.toFixed(2)}</td>
                                                <td style="padding: 1rem; border-bottom: 1px solid #e5e7eb;">${p.stock}</td>
                                                <td style="padding: 1rem; border-bottom: 1px solid #e5e7eb;">
                                                    <button class="btn btn-secondary" onclick="editProduct(${p.id})">ç¼–è¾‘</button>
                                                    <button class="btn btn-secondary" onclick="deleteProduct(${p.id})" style="margin-left: 0.5rem;">åˆ é™¤</button>
                                                </td>
                                            </tr>
                                        `).join('')}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    `;
                    break;
                case 'orders':
                    content.innerHTML = `
                        <div class="p-4">
                            <h2 class="font-bold mb-4">ğŸ“‹ è®¢å•ç®¡ç†ç³»ç»Ÿ</h2>
                            
                            <!-- è®¢å•ç»Ÿè®¡å¡ç‰‡ -->
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-left: 4px solid #16a34a;">
                                    <h3 style="color: #16a34a; margin-bottom: 0.5rem;">âœ… å·²å®Œæˆ</h3>
                                    <p style="font-size: 2rem; font-weight: bold;">8</p>
                                    <p style="font-size: 0.9rem; color: #6b7280;">æœ¬æ—¥å®Œæˆè®¢å•</p>
                                </div>
                                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-left: 4px solid #f59e0b;">
                                    <h3 style="color: #f59e0b; margin-bottom: 0.5rem;">â³ å¤„ç†ä¸­</h3>
                                    <p style="font-size: 2rem; font-weight: bold;">3</p>
                                    <p style="font-size: 0.9rem; color: #6b7280;">å¾…ç¡®è®¤ä»˜æ¬¾</p>
                                </div>
                                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-left: 4px solid #dc2626;">
                                    <h3 style="color: #dc2626; margin-bottom: 0.5rem;">ğŸšš é…é€ä¸­</h3>
                                    <p style="font-size: 2rem; font-weight: bold;">2</p>
                                    <p style="font-size: 0.9rem; color: #6b7280;">Lalamoveé…é€</p>
                                </div>
                                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-left: 4px solid #3b82f6;">
                                    <h3 style="color: #3b82f6; margin-bottom: 0.5rem;">ğŸ’° ä»Šæ—¥è¥æ”¶</h3>
                                    <p style="font-size: 2rem; font-weight: bold;">RM 456</p>
                                    <p style="font-size: 0.9rem; color: #6b7280;">11ä¸ªè®¢å•</p>
                                </div>
                            </div>

                            <!-- å¿«é€Ÿæ“ä½œ -->
                            <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 2rem;">
                                <h3 style="margin-bottom: 1rem;">ğŸ”§ å¿«é€Ÿæ“ä½œ</h3>
                                <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                    <button class="btn btn-primary" onclick="alert('æ–°å»ºè®¢å•åŠŸèƒ½')">+ æ–°å»ºè®¢å•</button>
                                    <button class="btn btn-secondary" onclick="alert('å¯¼å‡ºæŠ¥è¡¨åŠŸèƒ½')">ğŸ“„ å¯¼å‡ºæŠ¥è¡¨</button>
                                    <button class="btn btn-secondary" onclick="alert('æ‰¹é‡æ‰“å°åŠŸèƒ½')">ğŸ–¨ï¸ æ‰¹é‡æ‰“å°</button>
                                    <button class="btn btn-secondary" onclick="showAdminTab('orders')">ğŸ”„ åˆ·æ–°æ•°æ®</button>
                                </div>
                            </div>

                            <!-- è®¢å•åˆ—è¡¨ -->
                            <div style="background: white; border-radius: 0.5rem; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                                <div style="padding: 1rem; border-bottom: 1px solid #e5e7eb; background: #f9fafb;">
                                    <h3>ğŸ“ è®¢å•åˆ—è¡¨</h3>
                                    <div style="display: flex; gap: 1rem; margin-top: 1rem; align-items: center; flex-wrap: wrap;">
                                        <input type="text" placeholder="æœç´¢è®¢å•å·/å®¢æˆ·å§“å..." style="flex: 1; min-width: 200px; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.375rem;">
                                        <select style="padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.375rem;">
                                            <option>å…¨éƒ¨çŠ¶æ€</option>
                                            <option>å¾…ç¡®è®¤</option>
                                            <option>å·²ç¡®è®¤</option>
                                            <option>é…é€ä¸­</option>
                                            <option>å·²å®Œæˆ</option>
                                            <option>å·²å–æ¶ˆ</option>
                                        </select>
                                        <select style="padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.375rem;">
                                            <option>å…¨éƒ¨é…é€æ–¹å¼</option>
                                            <option>è‡ªå–</option>
                                            <option>é…é€</option>
                                        </select>
                                    </div>
                                </div>
                                <div style="overflow-x: auto;">
                                    <table style="width: 100%; border-collapse: collapse; min-width: 800px;">
                                        <thead>
                                            <tr style="background: #f9fafb;">
                                                <th style="padding: 1rem; text-align: left; border-bottom: 1px solid #e5e7eb;">è®¢å•å·</th>
                                                <th style="padding: 1rem; text-align: left; border-bottom: 1px solid #e5e7eb;">å®¢æˆ·ä¿¡æ¯</th>
                                                <th style="padding: 1rem; text-align: left; border-bottom: 1px solid #e5e7eb;">å•†å“è¯¦æƒ…</th>
                                                <th style="padding: 1rem; text-align: left; border-bottom: 1px solid #e5e7eb;">é…é€æ–¹å¼</th>
                                                <th style="padding: 1rem; text-align: left; border-bottom: 1px solid #e5e7eb;">é‡‘é¢</th>
                                                <th style="padding: 1rem; text-align: left; border-bottom: 1px solid #e5e7eb;">çŠ¶æ€</th>
                                                <th style="padding: 1rem; text-align: left; border-bottom: 1px solid #e5e7eb;">æ“ä½œ</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            ${[
                                                {id: 'FWP20250101', customer: 'å¼ å°æ˜<br>019-123-4567', items: 'ç»å…¸å°å¼çƒ¤è‚  x2<br>ç‰¹è°ƒå¥¶èŒ¶ x1', delivery: 'è‡ªå–', amount: 'RM 30.80', status: 'å·²å®Œæˆ', time: '10:30'},
                                                {id: 'FWP20250102', customer: 'æå°çº¢<br>012-987-6543', items: 'é»‘çŒªä¸‰ä¸çƒ§å– x3<br>å…°å·æ‹‰é¢ x1', delivery: 'é…é€', amount: 'RM 42.20', status: 'é…é€ä¸­', time: '11:15'},
                                                {id: 'FWP20250103', customer: 'ç‹å¤§å<br>017-555-8888', items: 'æ‰‹å·¥éŸ­èœæ°´é¥º x5<br>å†¬ç“œæ’éª¨æ±¤ x2', delivery: 'è‡ªå–', amount: 'RM 56.50', status: 'å¾…ç¡®è®¤', time: '12:00'},
                                                {id: 'FWP20250104', customer: 'é™ˆç¾ä¸½<br>016-333-2222', items: 'Qå¼¹é±¼ä¸¸ x4<br>æ‹›ç‰Œé¸¡é¥­ x1', delivery: 'é…é€', amount: 'RM 35.60', status: 'å·²ç¡®è®¤', time: '12:30'},
                                                {id: 'FWP20250105', customer: 'æ—å¿—å¼º<br>018-777-9999', items: 'ç‰¹è°ƒå¥¶èŒ¶ x3', delivery: 'è‡ªå–', amount: 'RM 17.40', status: 'å·²å®Œæˆ', time: '13:45'}
                                            ].map(order => 
                                                '<tr style="border-bottom: 1px solid #e5e7eb;">' +
                                                    '<td style="padding: 1rem;">' +
                                                        '<div style="font-weight: bold; color: var(--primary-color);">' + order.id + '</div>' +
                                                        '<div style="font-size: 0.8rem; color: #6b7280;">' + order.time + '</div>' +
                                                    '</td>' +
                                                    '<td style="padding: 1rem;">' +
                                                        '<div style="font-size: 0.9rem;">' + order.customer + '</div>' +
                                                    '</td>' +
                                                    '<td style="padding: 1rem;">' +
                                                        '<div style="font-size: 0.9rem;">' + order.items + '</div>' +
                                                    '</td>' +
                                                    '<td style="padding: 1rem;">' +
                                                        '<span style="padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.8rem; background: ' + (order.delivery === 'è‡ªå–' ? '#ecfdf5' : '#fef3c7') + '; color: ' + (order.delivery === 'è‡ªå–' ? '#065f46' : '#92400e') + ';">' +
                                                            (order.delivery === 'è‡ªå–' ? 'ğŸª è‡ªå–' : 'ğŸšš é…é€') +
                                                        '</span>' +
                                                    '</td>' +
                                                    '<td style="padding: 1rem; font-weight: bold;">' + order.amount + '</td>' +
                                                    '<td style="padding: 1rem;">' +
                                                        '<span style="padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.8rem; color: white; background: ' + 
                                                            (order.status === 'å·²å®Œæˆ' ? '#16a34a' : 
                                                            order.status === 'é…é€ä¸­' ? '#dc2626' : 
                                                            order.status === 'å·²ç¡®è®¤' ? '#3b82f6' : '#f59e0b') + ';">' +
                                                            order.status +
                                                        '</span>' +
                                                    '</td>' +
                                                    '<td style="padding: 1rem;">' +
                                                        '<div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">' +
                                                            '<button class="btn" style="padding: 0.25rem 0.5rem; font-size: 0.8rem; background: #3b82f6; color: white;" onclick="alert(\'æŸ¥çœ‹è®¢å• ' + order.id + '\')">æŸ¥çœ‹</button>' +
                                                            '<button class="btn" style="padding: 0.25rem 0.5rem; font-size: 0.8rem; background: #16a34a; color: white;" onclick="alert(\'æ‰“å°è®¢å• ' + order.id + '\')">æ‰“å°</button>' +
                                                            (order.status !== 'å·²å®Œæˆ' ? '<button class="btn" style="padding: 0.25rem 0.5rem; font-size: 0.8rem; background: #f59e0b; color: white;" onclick="alert(\'æ›´æ–°è®¢å•çŠ¶æ€ ' + order.id + '\')">æ›´æ–°</button>' : '') +
                                                        '</div>' +
                                                    '</td>' +
                                                '</tr>'
                                            ).join('')}
                                        </tbody>
                                    </table>
                                </div>
                                <div style="padding: 1rem; background: #f9fafb; text-center;">
                                    <p style="color: #6b7280;">æ˜¾ç¤º 5 æ¡è®¢å•ï¼Œå…± 5 æ¡ | WhatsAppè‡ªåŠ¨é€šçŸ¥å·²å¯ç”¨ ğŸ“±</p>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'analytics':
                    content.innerHTML = `
                        <div class="p-4">
                            <h2 class="font-bold mb-4">ğŸ“ˆ æ•°æ®åˆ†æä¸­å¿ƒ</h2>
                            
                            <!-- åˆ†ææ¦‚è§ˆ -->
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                                <div style="background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; padding: 1.5rem; border-radius: 0.5rem;">
                                    <h3 style="margin-bottom: 0.5rem;">ğŸ“Š æ€»é”€å”®é¢</h3>
                                    <p style="font-size: 2rem; font-weight: bold;">RM 12,345</p>
                                    <p style="font-size: 0.9rem; opacity: 0.9;">æœ¬æœˆç´¯è®¡</p>
                                </div>
                                <div style="background: linear-gradient(135deg, #10b981, #047857); color: white; padding: 1.5rem; border-radius: 0.5rem;">
                                    <h3 style="margin-bottom: 0.5rem;">ğŸ›ï¸ è®¢å•æ€»æ•°</h3>
                                    <p style="font-size: 2rem; font-weight: bold;">156</p>
                                    <p style="font-size: 0.9rem; opacity: 0.9;">æœ¬æœˆè®¢å•</p>
                                </div>
                                <div style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white; padding: 1.5rem; border-radius: 0.5rem;">
                                    <h3 style="margin-bottom: 0.5rem;">ğŸ‘¥ å®¢æˆ·æ•°é‡</h3>
                                    <p style="font-size: 2rem; font-weight: bold;">89</p>
                                    <p style="font-size: 0.9rem; opacity: 0.9;">æ´»è·ƒå®¢æˆ·</p>
                                </div>
                                <div style="background: linear-gradient(135deg, #dc2626, #b91c1c); color: white; padding: 1.5rem; border-radius: 0.5rem;">
                                    <h3 style="margin-bottom: 0.5rem;">ğŸ“ˆ å¹³å‡å•ä»·</h3>
                                    <p style="font-size: 2rem; font-weight: bold;">RM 79</p>
                                    <p style="font-size: 0.9rem; opacity: 0.9;">æ¯å•å¹³å‡</p>
                                </div>
                            </div>

                            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; margin-bottom: 2rem;">
                                <!-- é”€å”®è¶‹åŠ¿å›¾ -->
                                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                                    <h3 style="margin-bottom: 1rem;">ğŸ“ˆ é”€å”®è¶‹åŠ¿ (æœ€è¿‘7å¤©)</h3>
                                    <div style="height: 300px; background: #f9fafb; border-radius: 0.375rem; display: flex; align-items: end; justify-content: space-around; padding: 1rem;">
                                        ${['å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'].map((day, i) => {
                                            const height = Math.random() * 200 + 50;
                                            const value = Math.round(Math.random() * 500 + 200);
                                            return `
                                                <div style="display: flex; flex-direction: column; align-items: center;">
                                                    <div style="font-size: 0.8rem; margin-bottom: 0.5rem; color: #6b7280;">RM${value}</div>
                                                    <div style="width: 40px; background: linear-gradient(to top, #dc2626, #f87171); border-radius: 0.25rem; height: ${height}px;"></div>
                                                    <div style="font-size: 0.8rem; margin-top: 0.5rem; color: #6b7280;">${day}</div>
                                                </div>
                                            `;
                                        }).join('')}
                                    </div>
                                </div>

                                <!-- äº§å“æ’è¡Œ -->
                                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                                    <h3 style="margin-bottom: 1rem;">ğŸ† çƒ­é”€äº§å“ TOP5</h3>
                                    ${products.slice(0, 5).map((product, index) => {
                                        const sales = Math.round(Math.random() * 50 + 10);
                                        return `
                                            <div style="display: flex; align-items: center; margin-bottom: 1rem; padding: 0.75rem; background: #f9fafb; border-radius: 0.375rem;">
                                                <div style="width: 24px; height: 24px; background: ${index < 3 ? ['#ffd700', '#c0c0c0', '#cd7f32'][index] : '#e5e7eb'}; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 0.75rem;">
                                                    ${index + 1}
                                                </div>
                                                <div style="flex: 1;">
                                                    <div style="font-weight: 600; font-size: 0.9rem;">${product.name}</div>
                                                    <div style="color: #6b7280; font-size: 0.8rem;">é”€é‡: ${sales} ä»½</div>
                                                </div>
                                                <div style="font-weight: bold; color: var(--primary-color);">RM${(product.price * sales).toFixed(0)}</div>
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                            </div>

                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem;">
                                <!-- åˆ†ç±»åˆ†æ -->
                                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                                    <h3 style="margin-bottom: 1rem;">ğŸ¯ åˆ†ç±»é”€å”®åˆ†æ</h3>
                                    <div style="margin-top: 1rem;">
                                        ${Array.from(new Set(products.map(p => p.category))).map(category => {
                                            const count = products.filter(p => p.category === category).length;
                                            const revenue = Math.round(Math.random() * 2000 + 500);
                                            const percentage = Math.round((count / products.length) * 100);
                                            return `
                                                <div style="margin-bottom: 1rem;">
                                                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                                        <span style="font-weight: 600;">${category}</span>
                                                        <span style="color: var(--primary-color); font-weight: bold;">RM${revenue}</span>
                                                    </div>
                                                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: #6b7280; margin-bottom: 0.5rem;">
                                                        <span>${count} ä¸ªäº§å“</span>
                                                        <span>${percentage}% å æ¯”</span>
                                                    </div>
                                                    <div style="width: 100%; background: #e5e7eb; border-radius: 0.25rem; height: 8px;">
                                                        <div style="background: linear-gradient(to right, #dc2626, #f87171); height: 100%; border-radius: 0.25rem; width: ${percentage}%;"></div>
                                                    </div>
                                                </div>
                                            `;
                                        }).join('')}
                                    </div>
                                </div>

                                <!-- åº“å­˜åˆ†æ -->
                                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                                    <h3 style="margin-bottom: 1rem;">ğŸ“¦ åº“å­˜æ·±åº¦åˆ†æ</h3>
                                    <div style="margin-top: 1rem;">
                                        <div style="display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid #e5e7eb;">
                                            <span style="font-weight: 600;">ğŸ“Š æ€»åº“å­˜é‡</span>
                                            <span style="font-weight: bold; color: #3b82f6;">${products.reduce((sum, p) => sum + p.stock, 0)} ä»¶</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid #e5e7eb;">
                                            <span style="font-weight: 600;">ğŸ’° åº“å­˜æ€»å€¼</span>
                                            <span style="font-weight: bold; color: #10b981;">RM${products.reduce((sum, p) => sum + (p.price * p.stock), 0).toFixed(0)}</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid #e5e7eb;">
                                            <span style="font-weight: 600;">ğŸ“ˆ å¹³å‡åº“å­˜</span>
                                            <span style="font-weight: bold; color: #f59e0b;">${Math.round(products.reduce((sum, p) => sum + p.stock, 0) / products.length)} ä»¶</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid #e5e7eb;">
                                            <span style="font-weight: 600;">âš ï¸ ä½åº“å­˜äº§å“</span>
                                            <span style="font-weight: bold; color: #dc2626;">${products.filter(p => p.stock < 10).length} ä¸ª</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; padding: 0.75rem 0;">
                                            <span style="font-weight: 600;">ğŸ”„ åº“å­˜å‘¨è½¬ç‡</span>
                                            <span style="font-weight: bold; color: #8b5cf6;">2.3x/æœˆ</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- å®¢æˆ·åˆ†æ -->
                                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                                    <h3 style="margin-bottom: 1rem;">ğŸ‘¥ å®¢æˆ·è¡Œä¸ºåˆ†æ</h3>
                                    <div style="margin-top: 1rem;">
                                        <div style="margin-bottom: 1rem; padding: 1rem; background: #f9fafb; border-radius: 0.375rem;">
                                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                                <span style="font-weight: 600;">ğŸ“± é…é€æ–¹å¼åå¥½</span>
                                            </div>
                                            <div style="margin-bottom: 0.5rem;">
                                                <div style="display: flex; justify-content: space-between; font-size: 0.9rem;">
                                                    <span>ğŸª è‡ªå–</span>
                                                    <span>65%</span>
                                                </div>
                                                <div style="width: 100%; background: #e5e7eb; border-radius: 0.25rem; height: 6px; margin-top: 0.25rem;">
                                                    <div style="background: #10b981; height: 100%; border-radius: 0.25rem; width: 65%;"></div>
                                                </div>
                                            </div>
                                            <div style="margin-bottom: 0.5rem;">
                                                <div style="display: flex; justify-content: space-between; font-size: 0.9rem;">
                                                    <span>ğŸšš é…é€</span>
                                                    <span>35%</span>
                                                </div>
                                                <div style="width: 100%; background: #e5e7eb; border-radius: 0.25rem; height: 6px; margin-top: 0.25rem;">
                                                    <div style="background: #f59e0b; height: 100%; border-radius: 0.25rem; width: 35%;"></div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div style="margin-bottom: 1rem; padding: 1rem; background: #f9fafb; border-radius: 0.375rem;">
                                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                                <span style="font-weight: 600;">ğŸ’³ ä»˜æ¬¾æ–¹å¼åˆ†å¸ƒ</span>
                                            </div>
                                            <div style="font-size: 0.9rem; color: #6b7280;">
                                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.25rem;">
                                                    <span>ğŸ¦ Maybank QR</span>
                                                    <span>72%</span>
                                                </div>
                                                <div style="display: flex; justify-content: space-between;">
                                                    <span>ğŸ’° TNG eWallet</span>
                                                    <span>28%</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div style="padding: 1rem; background: #f0f9ff; border-radius: 0.375rem; border-left: 4px solid #3b82f6;">
                                            <p style="color: #1e40af; font-size: 0.9rem;">ğŸ’¡ <strong>æ´å¯Ÿ:</strong> å®¢æˆ·æ›´åå¥½è‡ªå–æ–¹å¼ï¼Œå»ºè®®ä¼˜åŒ–åº—å†…ä½“éªŒå’Œå–è´§æµç¨‹</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'scanner':
                    content.innerHTML = `
                        <div class="p-4">
                            <h2 class="font-bold mb-4">ğŸ“± æ‰«ç ç®¡ç†ç³»ç»Ÿ</h2>
                            
                            <!-- æ‰«ç ç»Ÿè®¡ -->
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-left: 4px solid #16a34a;">
                                    <h3 style="color: #16a34a; margin-bottom: 0.5rem;">âœ… ä»Šæ—¥æ‰«ç </h3>
                                    <p style="font-size: 2rem; font-weight: bold;">45</p>
                                    <p style="font-size: 0.9rem; color: #6b7280;">æˆåŠŸæ‰«ææ¬¡æ•°</p>
                                </div>
                                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-left: 4px solid #3b82f6;">
                                    <h3 style="color: #3b82f6; margin-bottom: 0.5rem;">ğŸ“Š æœ¬å‘¨æ€»è®¡</h3>
                                    <p style="font-size: 2rem; font-weight: bold;">312</p>
                                    <p style="font-size: 0.9rem; color: #6b7280;">æ‰«ææ€»æ•°</p>
                                </div>
                                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-left: 4px solid #f59e0b;">
                                    <h3 style="color: #f59e0b; margin-bottom: 0.5rem;">âš¡ æ‰«æé€Ÿåº¦</h3>
                                    <p style="font-size: 2rem; font-weight: bold;">1.2s</p>
                                    <p style="font-size: 0.9rem; color: #6b7280;">å¹³å‡è¯†åˆ«æ—¶é—´</p>
                                </div>
                            </div>

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                                <!-- æ‰«ç æ“ä½œåŒº -->
                                <div style="background: white; padding: 2rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                                    <h3 style="margin-bottom: 1.5rem; text-align: center;">ğŸ¯ æ‰«ç æ“ä½œä¸­å¿ƒ</h3>
                                    
                                    <!-- æ‰«ç æ¨¡å¼é€‰æ‹© -->
                                    <div style="margin-bottom: 2rem;">
                                        <h4 style="margin-bottom: 1rem;">æ‰«ç æ¨¡å¼</h4>
                                        <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                                            <button class="btn btn-primary" id="camera-mode-btn" onclick="setScanMode('camera')" style="flex: 1;">ğŸ“· æ‘„åƒå¤´æ‰«ç </button>
                                            <button class="btn btn-secondary" id="gun-mode-btn" onclick="setScanMode('gun')" style="flex: 1;">ğŸ”« æ‰«ç æªæ¨¡å¼</button>
                                        </div>
                                        <p style="font-size: 0.9rem; color: #6b7280; text-align: center;">é€‰æ‹©é€‚åˆçš„æ‰«ç æ–¹å¼è¿›è¡Œæ“ä½œ</p>
                                    </div>

                                    <!-- æ‘„åƒå¤´æ‰«ç åŒºåŸŸ -->
                                    <div id="camera-scan-area" style="text-align: center;">
                                        <div style="width: 300px; height: 300px; background: #f9fafb; border: 2px dashed #d1d5db; border-radius: 0.5rem; margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; position: relative;">
                                            <div id="scan-placeholder" style="text-align: center; color: #6b7280;">
                                                <p style="font-size: 4rem; margin-bottom: 0.5rem;">ğŸ“±</p>
                                                <p>ç‚¹å‡»å¯åŠ¨æ‘„åƒå¤´æ‰«ç </p>
                                            </div>
                                            <div id="scan-frame" style="display: none; width: 200px; height: 200px; border: 3px solid #dc2626; border-radius: 0.5rem; position: absolute; animation: pulse 2s infinite;"></div>
                                        </div>
                                        <button class="btn btn-primary" onclick="startCameraScanner()" style="margin-bottom: 1rem;">ğŸ“± å¯åŠ¨æ‘„åƒå¤´æ‰«ç </button>
                                        <button class="btn btn-secondary" onclick="stopCameraScanner()" style="margin-left: 0.5rem;">â¹ï¸ åœæ­¢æ‰«ç </button>
                                    </div>

                                    <!-- æ‰«ç æªæ¨¡å¼åŒºåŸŸ -->
                                    <div id="gun-scan-area" style="display: none; text-align: center;">
                                        <div style="padding: 2rem; background: #f0f9ff; border-radius: 0.5rem; margin-bottom: 1rem;">
                                            <p style="font-size: 3rem; margin-bottom: 1rem;">ğŸ”«</p>
                                            <h4 style="color: #1e40af;">æ‰«ç æªå·²å°±ç»ª</h4>
                                            <p style="color: #6b7280; margin-top: 0.5rem;">è¯·å°†å…‰æ ‡ä¿æŒåœ¨æ­¤é¡µé¢ï¼Œç„¶åä½¿ç”¨æ‰«ç æªæ‰«æ</p>
                                        </div>
                                        <div style="background: #fef3c7; padding: 1rem; border-radius: 0.375rem; border-left: 4px solid #f59e0b;">
                                            <p style="color: #92400e; font-size: 0.9rem;">ğŸ’¡ æç¤º: ç¡®ä¿é¡µé¢ç„¦ç‚¹åœ¨æ­¤å¤„ï¼Œæ‰«ç æªæ‰«æåä¼šè‡ªåŠ¨å½•å…¥</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- æ‰«æç»“æœå’Œå†å² -->
                                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                                    <h3 style="margin-bottom: 1rem;">ğŸ“‹ æ‰«æç»“æœ</h3>
                                    
                                    <!-- å½“å‰æ‰«æç»“æœ -->
                                    <div id="current-scan-result" style="background: #f9fafb; padding: 1rem; border-radius: 0.375rem; margin-bottom: 1.5rem; min-height: 80px; display: flex; align-items: center; justify-content: center; border: 2px dashed #d1d5db;">
                                        <p style="color: #6b7280; text-align: center;">ç­‰å¾…æ‰«æç»“æœ...</p>
                                    </div>

                                    <!-- å¿«é€Ÿæ“ä½œ -->
                                    <div style="margin-bottom: 1.5rem;">
                                        <h4 style="margin-bottom: 0.5rem;">å¿«é€Ÿæ“ä½œ</h4>
                                        <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                                            <button class="btn btn-secondary" onclick="copyScanResult()" style="font-size: 0.8rem; padding: 0.25rem 0.5rem;">ğŸ“‹ å¤åˆ¶</button>
                                            <button class="btn btn-secondary" onclick="searchProduct()" style="font-size: 0.8rem; padding: 0.25rem 0.5rem;">ğŸ” æŸ¥æ‰¾å•†å“</button>
                                            <button class="btn btn-secondary" onclick="addToInventory()" style="font-size: 0.8rem; padding: 0.25rem 0.5rem;">ğŸ“¦ å…¥åº“</button>
                                            <button class="btn btn-secondary" onclick="clearScanHistory()" style="font-size: 0.8rem; padding: 0.25rem 0.5rem;">ğŸ—‘ï¸ æ¸…ç©ºå†å²</button>
                                        </div>
                                    </div>

                                    <!-- æ‰«æå†å² -->
                                    <div>
                                        <h4 style="margin-bottom: 1rem;">ğŸ“š æ‰«æå†å² (æœ€è¿‘10æ¡)</h4>
                                        <div id="scan-history" style="max-height: 300px; overflow-y: auto;">
                                            ${Array.from({length: 5}, (_, i) => {
                                                const time = new Date(Date.now() - i * 300000).toLocaleTimeString();
                                                const codes = ['FWP12345678', 'SKU87654321', 'PROD11111111', 'ITEM22222222', 'CODE33333333'];
                                                return `
                                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; border-bottom: 1px solid #e5e7eb; background: ${i % 2 === 0 ? '#f9fafb' : 'white'};">
                                                        <div>
                                                            <div style="font-family: monospace; font-weight: bold; color: var(--primary-color);">${codes[i]}</div>
                                                            <div style="font-size: 0.8rem; color: #6b7280;">${time}</div>
                                                        </div>
                                                        <div style="display: flex; gap: 0.25rem;">
                                                            <button class="btn" style="padding: 0.25rem 0.5rem; font-size: 0.8rem; background: #3b82f6; color: white;" onclick="alert('æŸ¥çœ‹è¯¦æƒ…: ${codes[i]}')">è¯¦æƒ…</button>
                                                            <button class="btn" style="padding: 0.25rem 0.5rem; font-size: 0.8rem; background: #16a34a; color: white;" onclick="alert('å†æ¬¡ä½¿ç”¨: ${codes[i]}')">ä½¿ç”¨</button>
                                                        </div>
                                                    </div>
                                                `;
                                            }).join('')}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- æ‰«ç ç»Ÿè®¡å›¾è¡¨ -->
                            <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-top: 2rem;">
                                <h3 style="margin-bottom: 1rem;">ğŸ“Š æ‰«ç ä½¿ç”¨ç»Ÿè®¡</h3>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                                    ${Array.from({length: 7}, (_, i) => {
                                        const day = ['å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'][i];
                                        const count = Math.round(Math.random() * 50 + 10);
                                        return `
                                            <div style="text-align: center; padding: 1rem; background: #f9fafb; border-radius: 0.375rem;">
                                                <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary-color); margin-bottom: 0.5rem;">${count}</div>
                                                <div style="font-size: 0.9rem; color: #6b7280;">${day}</div>
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'camera':
                    content.innerHTML = `
                        <div class="p-4">
                            <h2 class="font-bold mb-4">ğŸ“· æ‹ç…§ç®¡ç†ç³»ç»Ÿ</h2>
                            
                            <!-- æ‹ç…§ç»Ÿè®¡ -->
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-left: 4px solid #16a34a;">
                                    <h3 style="color: #16a34a; margin-bottom: 0.5rem;">ğŸ“¸ ä»Šæ—¥æ‹ç…§</h3>
                                    <p style="font-size: 2rem; font-weight: bold;">28</p>
                                    <p style="font-size: 0.9rem; color: #6b7280;">æˆåŠŸæ‹æ‘„ç…§ç‰‡</p>
                                </div>
                                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-left: 4px solid #3b82f6;">
                                    <h3 style="color: #3b82f6; margin-bottom: 0.5rem;">ğŸ’¾ å­˜å‚¨ç©ºé—´</h3>
                                    <p style="font-size: 2rem; font-weight: bold;">2.8GB</p>
                                    <p style="font-size: 0.9rem; color: #6b7280;">å·²ä½¿ç”¨ç©ºé—´</p>
                                </div>
                                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-left: 4px solid #f59e0b;">
                                    <h3 style="color: #f59e0b; margin-bottom: 0.5rem;">ğŸ—‚ï¸ ç…§ç‰‡åˆ†ç±»</h3>
                                    <p style="font-size: 2rem; font-weight: bold;">8</p>
                                    <p style="font-size: 0.9rem; color: #6b7280;">ä¸ªç›¸å†Œ</p>
                                </div>
                            </div>

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                                <!-- æ‹ç…§æ“ä½œåŒº -->
                                <div style="background: white; padding: 2rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                                    <h3 style="margin-bottom: 1.5rem; text-align: center;">ğŸ“· æ‹ç…§æ“ä½œä¸­å¿ƒ</h3>
                                    
                                    <!-- ç›¸æœºé¢„è§ˆåŒº -->
                                    <div style="margin-bottom: 2rem;">
                                        <div id="camera-preview-area" style="width: 100%; height: 300px; background: #000; border-radius: 0.5rem; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center;">
                                            <div id="camera-placeholder" style="text-align: center; color: white;">
                                                <p style="font-size: 4rem; margin-bottom: 0.5rem;">ğŸ“·</p>
                                                <p>ç‚¹å‡»å¯åŠ¨ç›¸æœº</p>
                                            </div>
                                            <video id="camera-video" style="width: 100%; height: 100%; object-fit: cover; display: none;" autoplay playsinline></video>
                                            <canvas id="photo-canvas" style="display: none;"></canvas>
                                        </div>
                                        
                                        <!-- ç›¸æœºæ§åˆ¶æŒ‰é’® -->
                                        <div style="display: flex; gap: 1rem; margin-top: 1rem; justify-content: center;">
                                            <button class="btn btn-primary" onclick="startCamera()" id="start-camera-btn">ğŸ“· å¯åŠ¨ç›¸æœº</button>
                                            <button class="btn btn-success" onclick="takePhoto()" id="take-photo-btn" style="display: none;">ğŸ“¸ æ‹ç…§</button>
                                            <button class="btn btn-secondary" onclick="stopCamera()" id="stop-camera-btn" style="display: none;">â¹ï¸ åœæ­¢</button>
                                        </div>
                                    </div>

                                    <!-- æ‹ç…§è®¾ç½® -->
                                    <div style="margin-bottom: 1.5rem;">
                                        <h4 style="margin-bottom: 1rem;">âš™ï¸ æ‹ç…§è®¾ç½®</h4>
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                            <div>
                                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">æ‘„åƒå¤´é€‰æ‹©:</label>
                                                <select style="width: 100%; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.375rem;">
                                                    <option>å‰ç½®æ‘„åƒå¤´</option>
                                                    <option>åç½®æ‘„åƒå¤´</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">å›¾ç‰‡è´¨é‡:</label>
                                                <select style="width: 100%; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.375rem;">
                                                    <option>é«˜è´¨é‡ (1080p)</option>
                                                    <option>æ ‡å‡†è´¨é‡ (720p)</option>
                                                    <option>å‹ç¼©è´¨é‡ (480p)</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- å¿«é€Ÿæ“ä½œ -->
                                    <div>
                                        <h4 style="margin-bottom: 0.5rem;">ğŸ”§ å¿«é€Ÿæ“ä½œ</h4>
                                        <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                                            <button class="btn btn-secondary" onclick="uploadPhoto()" style="font-size: 0.8rem; padding: 0.25rem 0.5rem;">ğŸ“ ä¸Šä¼ ç…§ç‰‡</button>
                                            <button class="btn btn-secondary" onclick="openGallery()" style="font-size: 0.8rem; padding: 0.25rem 0.5rem;">ğŸ–¼ï¸ ç…§ç‰‡åº“</button>
                                            <button class="btn btn-secondary" onclick="clearStorage()" style="font-size: 0.8rem; padding: 0.25rem 0.5rem;">ğŸ—‘ï¸ æ¸…ç†å­˜å‚¨</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- ç…§ç‰‡é¢„è§ˆå’Œç®¡ç† -->
                                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                                    <h3 style="margin-bottom: 1rem;">ğŸ–¼ï¸ ç…§ç‰‡é¢„è§ˆ</h3>
                                    
                                    <!-- å½“å‰ç…§ç‰‡é¢„è§ˆ -->
                                    <div id="current-photo-preview" style="background: #f9fafb; border: 2px dashed #d1d5db; border-radius: 0.5rem; margin-bottom: 1.5rem; min-height: 200px; display: flex; align-items: center; justify-content: center;">
                                        <p style="color: #6b7280; text-align: center;">æ‹ç…§åæ˜¾ç¤ºé¢„è§ˆ...</p>
                                    </div>

                                    <!-- ç…§ç‰‡æ“ä½œ -->
                                    <div style="margin-bottom: 1.5rem;" id="photo-actions" style="display: none;">
                                        <h4 style="margin-bottom: 0.5rem;">ğŸ“ ç…§ç‰‡æ“ä½œ</h4>
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem;">
                                            <button class="btn btn-success" onclick="savePhoto()" style="font-size: 0.8rem;">ğŸ’¾ ä¿å­˜</button>
                                            <button class="btn btn-primary" onclick="uploadToCloud()" style="font-size: 0.8rem;">â˜ï¸ ä¸Šä¼ äº‘ç«¯</button>
                                            <button class="btn btn-secondary" onclick="editPhoto()" style="font-size: 0.8rem;">âœï¸ ç¼–è¾‘</button>
                                            <button class="btn btn-secondary" onclick="sharePhoto()" style="font-size: 0.8rem;">ğŸ“¤ åˆ†äº«</button>
                                        </div>
                                    </div>

                                    <!-- æœ€è¿‘ç…§ç‰‡ -->
                                    <div>
                                        <h4 style="margin-bottom: 1rem;">ğŸ“š æœ€è¿‘ç…§ç‰‡ (æœ€æ–°6å¼ )</h4>
                                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; max-height: 300px; overflow-y: auto;">
                                            ${Array.from({length: 6}, (_, i) => {
                                                const time = new Date(Date.now() - i * 600000).toLocaleTimeString();
                                                return `
                                                    <div style="aspect-ratio: 1; background: linear-gradient(45deg, #f3f4f6, #e5e7eb); border-radius: 0.375rem; position: relative; overflow: hidden; cursor: pointer;" onclick="alert('æŸ¥çœ‹ç…§ç‰‡ ${i + 1}')">
                                                        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.1);">
                                                            <span style="font-size: 2rem;">ğŸ“·</span>
                                                        </div>
                                                        <div style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.7); color: white; padding: 0.25rem; font-size: 0.7rem; text-align: center;">
                                                            ${time}
                                                        </div>
                                                        <div style="position: absolute; top: 0.25rem; right: 0.25rem;">
                                                            <button style="background: rgba(255,255,255,0.9); border: none; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; cursor: pointer;" onclick="event.stopPropagation(); alert('åˆ é™¤ç…§ç‰‡ ${i + 1}')">Ã—</button>
                                                        </div>
                                                    </div>
                                                `;
                                            }).join('')}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ç…§ç‰‡åˆ†ç±»ç®¡ç† -->
                            <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-top: 2rem;">
                                <h3 style="margin-bottom: 1rem;">ğŸ—‚ï¸ ç…§ç‰‡åˆ†ç±»ç®¡ç†</h3>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                                    ${[
                                        {name: 'äº§å“ç…§ç‰‡', count: 45, icon: 'ğŸ“¦', color: '#3b82f6'},
                                        {name: 'åº—é“ºç¯å¢ƒ', count: 28, icon: 'ğŸª', color: '#16a34a'},
                                        {name: 'å®¢æˆ·ç•™å½±', count: 33, icon: 'ğŸ‘¥', color: '#f59e0b'},
                                        {name: 'æ´»åŠ¨è®°å½•', count: 19, icon: 'ğŸ‰', color: '#dc2626'},
                                        {name: 'åº“å­˜è®°å½•', count: 52, icon: 'ğŸ“‹', color: '#8b5cf6'},
                                        {name: 'æ”¶æ®å‡­è¯', count: 67, icon: 'ğŸ§¾', color: '#06b6d4'},
                                        {name: 'é…é€ç…§ç‰‡', count: 23, icon: 'ğŸšš', color: '#84cc16'},
                                        {name: 'å…¶ä»–ç…§ç‰‡', count: 15, icon: 'ğŸ“·', color: '#6b7280'}
                                    ].map(category => `
                                        <div style="background: #f9fafb; padding: 1rem; border-radius: 0.375rem; border-left: 4px solid ${category.color}; cursor: pointer;" onclick="alert('æ‰“å¼€åˆ†ç±»: ${category.name}')">
                                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                                <span style="font-size: 1.5rem;">${category.icon}</span>
                                                <span style="font-weight: bold; color: ${category.color};">${category.count}</span>
                                            </div>
                                            <div style="font-weight: 600; margin-bottom: 0.25rem;">${category.name}</div>
                                            <div style="font-size: 0.8rem; color: #6b7280;">ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                default:
                    content.innerHTML = `
                        <div class="p-4">
                            <h2 class="font-bold mb-4">${tab}</h2>
                            <div style="background: white; padding: 2rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); text-align: center;">
                                <p>æ­¤åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­...</p>
                            </div>
                        </div>
                    `;
            }
        }

        // æ‰«ç åŠŸèƒ½
        let currentScanMode = 'camera';
        let scanHistory = [];

        function setScanMode(mode) {
            currentScanMode = mode;
            const cameraBtn = document.getElementById('camera-mode-btn');
            const gunBtn = document.getElementById('gun-mode-btn');
            const cameraArea = document.getElementById('camera-scan-area');
            const gunArea = document.getElementById('gun-scan-area');

            if (mode === 'camera') {
                cameraBtn.className = 'btn btn-primary';
                gunBtn.className = 'btn btn-secondary';
                cameraArea.style.display = 'block';
                gunArea.style.display = 'none';
            } else {
                cameraBtn.className = 'btn btn-secondary';
                gunBtn.className = 'btn btn-primary';
                cameraArea.style.display = 'none';
                gunArea.style.display = 'block';
            }
        }

        function startCameraScanner() {
            const placeholder = document.getElementById('scan-placeholder');
            const frame = document.getElementById('scan-frame');
            
            placeholder.style.display = 'none';
            frame.style.display = 'block';
            
            // æ¨¡æ‹Ÿæ‰«ç è¿‡ç¨‹
            setTimeout(() => {
                const mockCode = 'FWP' + Date.now().toString().slice(-8);
                displayScanResult(mockCode);
                addToScanHistory(mockCode);
            }, 2000);
        }

        function stopCameraScanner() {
            const placeholder = document.getElementById('scan-placeholder');
            const frame = document.getElementById('scan-frame');
            
            placeholder.style.display = 'block';
            frame.style.display = 'none';
        }

        function displayScanResult(code) {
            const resultDiv = document.getElementById('current-scan-result');
            resultDiv.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 1.2rem; font-weight: bold; color: var(--primary-color); margin-bottom: 0.5rem;">${code}</div>
                    <div style="font-size: 0.9rem; color: #6b7280;">æ‰«ææ—¶é—´: ${new Date().toLocaleTimeString()}</div>
                    <div style="margin-top: 1rem;">
                        <span style="padding: 0.25rem 0.5rem; background: #16a34a; color: white; border-radius: 0.25rem; font-size: 0.8rem;">âœ… æ‰«ææˆåŠŸ</span>
                    </div>
                </div>
            `;
        }

        function addToScanHistory(code) {
            scanHistory.unshift({
                code: code,
                time: new Date().toLocaleTimeString(),
                timestamp: Date.now()
            });
            
            if (scanHistory.length > 10) {
                scanHistory = scanHistory.slice(0, 10);
            }
            
            updateScanHistoryDisplay();
        }

        function updateScanHistoryDisplay() {
            const historyDiv = document.getElementById('scan-history');
            if (historyDiv && scanHistory.length > 0) {
                historyDiv.innerHTML = scanHistory.map((item, index) => `
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; border-bottom: 1px solid #e5e7eb; background: ${index % 2 === 0 ? '#f9fafb' : 'white'};">
                        <div>
                            <div style="font-family: monospace; font-weight: bold; color: var(--primary-color);">${item.code}</div>
                            <div style="font-size: 0.8rem; color: #6b7280;">${item.time}</div>
                        </div>
                        <div style="display: flex; gap: 0.25rem;">
                            <button class="btn" style="padding: 0.25rem 0.5rem; font-size: 0.8rem; background: #3b82f6; color: white;" onclick="alert('æŸ¥çœ‹è¯¦æƒ…: ${item.code}')">è¯¦æƒ…</button>
                            <button class="btn" style="padding: 0.25rem 0.5rem; font-size: 0.8rem; background: #16a34a; color: white;" onclick="alert('å†æ¬¡ä½¿ç”¨: ${item.code}')">ä½¿ç”¨</button>
                        </div>
                    </div>
                `).join('');
            }
        }

        function startScanner() {
            // å…¼å®¹æ—§ç‰ˆæœ¬å‡½æ•°å
            if (currentScanMode === 'camera') {
                startCameraScanner();
            } else {
                // æ‰«ç æªæ¨¡å¼
                const simulatedCode = 'FWP' + Math.random().toString(36).substr(2, 9).toUpperCase();
                displayScanResult(simulatedCode);
                addToScanHistory(simulatedCode);
            }
        }

        function copyScanResult() {
            const resultText = document.querySelector('#current-scan-result .font-weight-bold, #current-scan-result [style*="font-weight: bold"]');
            if (resultText) {
                navigator.clipboard.writeText(resultText.textContent).then(() => {
                    alert('æ‰«æç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
                });
            }
        }

        function searchProduct() {
            alert('æœç´¢äº§å“åŠŸèƒ½ - å°†åœ¨äº§å“åº“ä¸­æŸ¥æ‰¾ç›¸å…³å•†å“');
        }

        function addToInventory() {
            alert('å…¥åº“åŠŸèƒ½ - å°†æ‰«æç»“æœæ·»åŠ åˆ°åº“å­˜ç®¡ç†');
        }

        function clearScanHistory() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰«æå†å²å—ï¼Ÿ')) {
                scanHistory = [];
                updateScanHistoryDisplay();
                alert('æ‰«æå†å²å·²æ¸…ç©º');
            }
        }

        // ç›¸æœºåŠŸèƒ½
        let cameraStream = null;
        let currentPhotoData = null;

        function startCamera() {
            const video = document.getElementById('camera-video');
            const placeholder = document.getElementById('camera-placeholder');
            const startBtn = document.getElementById('start-camera-btn');
            const takeBtn = document.getElementById('take-photo-btn');
            const stopBtn = document.getElementById('stop-camera-btn');

            navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } })
                .then(function(stream) {
                    cameraStream = stream;
                    video.srcObject = stream;
                    video.style.display = 'block';
                    placeholder.style.display = 'none';
                    
                    startBtn.style.display = 'none';
                    takeBtn.style.display = 'inline-block';
                    stopBtn.style.display = 'inline-block';
                })
                .catch(function(err) {
                    alert('æ— æ³•è®¿é—®ç›¸æœº: ' + err.message);
                });
        }

        function stopCamera() {
            const video = document.getElementById('camera-video');
            const placeholder = document.getElementById('camera-placeholder');
            const startBtn = document.getElementById('start-camera-btn');
            const takeBtn = document.getElementById('take-photo-btn');
            const stopBtn = document.getElementById('stop-camera-btn');

            if (cameraStream) {
                cameraStream.getTracks().forEach(track => track.stop());
                cameraStream = null;
            }
            
            video.style.display = 'none';
            placeholder.style.display = 'block';
            
            startBtn.style.display = 'inline-block';
            takeBtn.style.display = 'none';
            stopBtn.style.display = 'none';
        }

        function takePhoto() {
            const video = document.getElementById('camera-video');
            const canvas = document.getElementById('photo-canvas');
            const previewDiv = document.getElementById('current-photo-preview');
            const actionsDiv = document.getElementById('photo-actions');
            
            if (!video.srcObject) {
                alert('è¯·å…ˆå¯åŠ¨ç›¸æœº');
                return;
            }

            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(video, 0, 0);
            
            currentPhotoData = canvas.toDataURL('image/jpeg', 0.8);
            
            // æ˜¾ç¤ºé¢„è§ˆ
            previewDiv.innerHTML = `
                <img src="${currentPhotoData}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 0.375rem;">
                <div style="position: absolute; top: 0.5rem; right: 0.5rem; background: rgba(0,0,0,0.7); color: white; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.8rem;">
                    ${new Date().toLocaleTimeString()}
                </div>
            `;
            previewDiv.style.position = 'relative';
            
            // æ˜¾ç¤ºæ“ä½œæŒ‰é’®
            if (actionsDiv) {
                actionsDiv.style.display = 'block';
            }
        }

        function savePhoto() {
            if (!currentPhotoData) {
                alert('æ²¡æœ‰å¯ä¿å­˜çš„ç…§ç‰‡');
                return;
            }
            
            const link = document.createElement('a');
            link.download = 'photo-' + Date.now() + '.jpg';
            link.href = currentPhotoData;
            link.click();
            alert('ç…§ç‰‡å·²ä¿å­˜åˆ°ä¸‹è½½æ–‡ä»¶å¤¹');
        }

        function uploadToCloud() {
            if (!currentPhotoData) {
                alert('æ²¡æœ‰å¯ä¸Šä¼ çš„ç…§ç‰‡');
                return;
            }
            
            // æ¨¡æ‹Ÿä¸Šä¼ è¿‡ç¨‹
            const uploadProgress = document.createElement('div');
            uploadProgress.innerHTML = `
                <div style="background: #f0f9ff; padding: 1rem; border-radius: 0.375rem; margin-top: 1rem; border-left: 4px solid #3b82f6;">
                    <p style="color: #1e40af;">ğŸ“¤ æ­£åœ¨ä¸Šä¼ åˆ°äº‘ç«¯...</p>
                    <div style="width: 100%; background: #e5e7eb; border-radius: 0.25rem; height: 8px; margin-top: 0.5rem;">
                        <div style="background: #3b82f6; height: 100%; border-radius: 0.25rem; width: 0%; transition: width 2s;" id="upload-progress-bar"></div>
                    </div>
                </div>
            `;
            
            document.getElementById('current-photo-preview').appendChild(uploadProgress);
            
            // æ¨¡æ‹Ÿä¸Šä¼ è¿›åº¦
            setTimeout(() => {
                document.getElementById('upload-progress-bar').style.width = '100%';
                setTimeout(() => {
                    uploadProgress.innerHTML = `
                        <div style="background: #f0fdf4; padding: 1rem; border-radius: 0.375rem; border-left: 4px solid #16a34a;">
                            <p style="color: #15803d;">âœ… ç…§ç‰‡ä¸Šä¼ æˆåŠŸï¼</p>
                            <p style="color: #15803d; font-size: 0.9rem;">äº‘ç«¯åœ°å€: https://storage.fwpshop.com/photos/${Date.now()}.jpg</p>
                        </div>
                    `;
                }, 2000);
            }, 100);
        }

        function editPhoto() {
            alert('ç…§ç‰‡ç¼–è¾‘åŠŸèƒ½ - æ”¯æŒè£å‰ªã€æ»¤é•œã€æ ‡æ³¨ç­‰');
        }

        function sharePhoto() {
            if (!currentPhotoData) {
                alert('æ²¡æœ‰å¯åˆ†äº«çš„ç…§ç‰‡');
                return;
            }
            
            if (navigator.share) {
                navigator.share({
                    title: 'é”‹å‘³æ´¾ç¾é£Ÿç…§ç‰‡',
                    text: 'æ¥è‡ªé”‹å‘³æ´¾ç¾é£Ÿç®¡ç†ç³»ç»Ÿçš„ç…§ç‰‡',
                    files: [new File([currentPhotoData], 'photo.jpg', { type: 'image/jpeg' })]
                });
            } else {
                alert('åˆ†äº«åŠŸèƒ½ - æ”¯æŒå¾®ä¿¡ã€QQã€æœ‹å‹åœˆç­‰å¹³å°');
            }
        }

        function uploadPhoto() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        currentPhotoData = e.target.result;
                        document.getElementById('current-photo-preview').innerHTML = `
                            <img src="${currentPhotoData}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 0.375rem;">
                        `;
                        document.getElementById('photo-actions').style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                }
            };
            input.click();
        }

        function openGallery() {
            alert('ç…§ç‰‡åº“åŠŸèƒ½ - æŸ¥çœ‹æ‰€æœ‰å·²ä¿å­˜çš„ç…§ç‰‡');
        }

        function clearStorage() {
            if (confirm('ç¡®å®šè¦æ¸…ç†ç…§ç‰‡å­˜å‚¨ç©ºé—´å—ï¼Ÿè¿™å°†åˆ é™¤æ‰€æœ‰ç¼“å­˜çš„ç…§ç‰‡ã€‚')) {
                alert('å­˜å‚¨ç©ºé—´æ¸…ç†å®Œæˆï¼Œé‡Šæ”¾äº† 500MB ç©ºé—´');
            }
        }

        // äº§å“ç®¡ç†åŠŸèƒ½
        function addProduct() {
            const name = prompt('äº§å“åç§°:');
            if (!name) return;
            
            const price = parseFloat(prompt('ä»·æ ¼:'));
            if (isNaN(price)) return;
            
            const category = prompt('åˆ†ç±» (çƒ¤è‚ ç³»åˆ—/çƒ§å–ç³»åˆ—/æ°´é¥ºç³»åˆ—/é±¼ä¸¸ç³»åˆ—/é¢é£Ÿç³»åˆ—/é¥­ç±»ç³»åˆ—/æ±¤å“ç³»åˆ—/é¥®æ–™ç³»åˆ—):');
            if (!category) return;
            
            const stock = parseInt(prompt('åº“å­˜:'));
            if (isNaN(stock)) return;
            
            const newProduct = {
                id: Math.max(...products.map(p => p.id)) + 1,
                name: name,
                price: price,
                category: category,
                stock: stock,
                image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjgwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2RjMjYyNiIvPjx0ZXh0IHg9IjE0MCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjAiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+5paw5ZWG5ZOBPHwdGV4dD48L3N2Zz4='
            };
            
            products.push(newProduct);
            showAdminTab('products');
            renderProducts();
            alert('äº§å“æ·»åŠ æˆåŠŸ');
        }

        function editProduct(id) {
            const product = products.find(p => p.id === id);
            if (!product) return;
            
            const name = prompt('äº§å“åç§°:', product.name);
            if (name !== null) product.name = name;
            
            const price = prompt('ä»·æ ¼:', product.price);
            if (price !== null && !isNaN(parseFloat(price))) product.price = parseFloat(price);
            
            const category = prompt('åˆ†ç±»:', product.category);
            if (category !== null) product.category = category;
            
            const stock = prompt('åº“å­˜:', product.stock);
            if (stock !== null && !isNaN(parseInt(stock))) product.stock = parseInt(stock);
            
            showAdminTab('products');
            renderProducts();
            alert('äº§å“æ›´æ–°æˆåŠŸ');
        }

        function deleteProduct(id) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªäº§å“å—ï¼Ÿ')) {
                products = products.filter(p => p.id !== id);
                showAdminTab('products');
                renderProducts();
                alert('äº§å“åˆ é™¤æˆåŠŸ');
            }
        }
    </script>
</body>
</html>